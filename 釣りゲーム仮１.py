# -*- coding: utf-8 -*-
"""Untitled2.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1oMBdRBHj5Gnna-pJdJ56d4V-nm-uohpi
"""

import streamlit as st
import random

# é­šãƒ‡ãƒ¼ã‚¿
fish_data = {
    "æ¹–": {
        "æ˜¥": {
            "æ™´ã‚Œ": [
                {"name": "ãƒ¯ã‚«ã‚µã‚®", "image": "images/wakasagi.jpg", "rare": False},
                {"name": "ãƒ•ãƒŠ", "image": "images/funa.jpg", "rare": False}
            ],
            "é›¨": [
                {"name": "ãƒŠãƒã‚º", "image": "images/namazu.jpg", "rare": False},
                {"name": "ãƒ‰ã‚¸ãƒ§ã‚¦", "image": "images/dojo.jpg", "rare": False}
            ]
        }
    }
}

# ãƒ¬ã‚¢é­šãƒªã‚¹ãƒˆ
rare_fish = [
    {"name": "ãƒªãƒ¥ã‚¦ã‚°ã‚¦ãƒãƒ„ã‚«ã‚¤", "image": "images/ryugu.jpg", "rare": True},
    {"name": "ã‚·ãƒ¼ãƒ©ã‚«ãƒ³ã‚¹", "image": "images/coelacanth.jpg", "rare": True}
]

# åˆæœŸåŒ–ï¼ˆå›³é‘‘ã®çŠ¶æ…‹ã‚’ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ä¿å­˜ï¼‰
if "zukan" not in st.session_state:
    st.session_state.zukan = {}

# ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›
st.title("ğŸ£ é­šé‡£ã‚Šã‚²ãƒ¼ãƒ ")
location = st.selectbox("å ´æ‰€", list(fish_data.keys()))
season = st.selectbox("å­£ç¯€", list(fish_data[location].keys()))
weather = st.selectbox("å¤©æ°—", list(fish_data[location][season].keys()))

if st.button("é‡£ã‚‹ï¼"):
    # ãƒ¬ã‚¢åˆ¤å®š
    if random.random() < 0.05:
        fish = random.choice(rare_fish)
        st.balloons()
        st.success(f"ğŸŒŸ è¶…ãƒ¬ã‚¢ï¼ã€{fish['name']}ã€ãŒé‡£ã‚ŒãŸï¼")
    else:
        candidates = fish_data[location][season][weather]
        fish = random.choice(candidates)
        st.info(f"{fish['name']} ã‚’é‡£ã‚Šã¾ã—ãŸï¼")

    st.image(fish["image"], width=300)

    # å›³é‘‘ç™»éŒ²
    if fish["name"] not in st.session_state.zukan:
        st.session_state.zukan[fish["name"]] = fish["image"]
        st.write(f"ğŸ“˜ ã€{fish['name']}ã€ã‚’å›³é‘‘ã«ç™»éŒ²ï¼")

# å›³é‘‘è¡¨ç¤º
with st.expander("ğŸŸ å›³é‘‘ã‚’è¦‹ã‚‹"):
    for name, image in st.session_state.zukan.items():
        st.write(f"ğŸ“– {name}")
        st.image(image, width=200)