# -*- coding: utf-8 -*-
"""Untitled2.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1oMBdRBHj5Gnna-pJdJ56d4V-nm-uohpi
"""

import streamlit as st
import random

# é­šãƒ‡ãƒ¼ã‚¿æ§‹é€ 
fish_data = {
    "æ¹–": {
        "æ˜¥": {
            "æ™´ã‚Œ": [
                {"name": "ãƒ¯ã‚«ã‚µã‚®", "image": "images/wakasagi.jpg", "rare": False},
                {"name": "ãƒ•ãƒŠ", "image": "images/funa.jpg", "rare": False}
            ],
            "é›¨": [
                {"name": "ãƒŠãƒã‚º", "image": "images/namazu.jpg", "rare": False},
                {"name": "ãƒ‰ã‚¸ãƒ§ã‚¦", "image": "images/dojo.jpg", "rare": False}
            ]
        },
        "å¤": {
            "æ™´ã‚Œ": [
                {"name": "ãƒ–ãƒ©ãƒƒã‚¯ãƒã‚¹", "image": "images/bass.jpg", "rare": False}
            ],
            "é›¨": [
                {"name": "ã‚¦ãƒŠã‚®", "image": "images/unagi.jpg", "rare": False}
            ]
        }
    }
}

rare_fish = [
    {"name": "ãƒªãƒ¥ã‚¦ã‚°ã‚¦ãƒãƒ„ã‚«ã‚¤", "image": "images/ryugu.jpg", "rare": True},
    {"name": "ã‚·ãƒ¼ãƒ©ã‚«ãƒ³ã‚¹", "image": "images/coelacanth.jpg", "rare": True}
]

# åˆæœŸåŒ–
if "zukan" not in st.session_state:
    st.session_state.zukan = {}

# ã‚¿ã‚¤ãƒˆãƒ«
st.title("ğŸ£ é­šé‡£ã‚Šã‚²ãƒ¼ãƒ ")

# å ´æ‰€ â†’ å­£ç¯€ â†’ å¤©æ°— ã®é †ã«é¸æŠè‚¢ã‚’è¡¨ç¤º
location = st.selectbox("ğŸ“ å ´æ‰€ã‚’é¸ã‚“ã§ãã ã•ã„", list(fish_data.keys()))
season = st.selectbox("ğŸŒ¸ å­£ç¯€ã‚’é¸ã‚“ã§ãã ã•ã„", list(fish_data[location].keys()))
weather = st.selectbox("ğŸŒ¦ å¤©æ°—ã‚’é¸ã‚“ã§ãã ã•ã„", list(fish_data[location][season].keys()))

# ãƒœã‚¿ãƒ³ã§é‡£ã‚Šé–‹å§‹
if st.button("ğŸ£ é‡£ã‚‹ï¼"):
    if random.random() < 0.05:
        fish = random.choice(rare_fish)
        st.balloons()
        st.success(f"âœ¨âœ¨ è¶…ãƒ¬ã‚¢ï¼ã€{fish['name']}ã€ã‚’é‡£ã‚Šä¸Šã’ãŸï¼ âœ¨âœ¨")
    else:
        candidates = fish_data[location][season][weather]
        fish = random.choice(candidates)
        st.info(f"{fish['name']} ã‚’é‡£ã‚Šã¾ã—ãŸï¼")

    st.image(fish["image"], width=300)

    # å›³é‘‘ã«ç™»éŒ²
    if fish["name"] not in st.session_state.zukan:
        st.session_state.zukan[fish["name"]] = fish["image"]
        st.write(f"ğŸ“– ã€{fish['name']}ã€ã‚’å›³é‘‘ã«ç™»éŒ²ã—ã¾ã—ãŸï¼")

# å›³é‘‘ã®è¡¨ç¤º
with st.expander("ğŸ  å›³é‘‘ã‚’è¦‹ã‚‹"):
    for name, image in st.session_state.zukan.items():
        st.write(f"ğŸ“˜ {name}")
        st.image(image, width=200)